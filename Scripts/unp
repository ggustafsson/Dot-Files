#!/usr/bin/env zsh

# Written by GÃ¶ran Gustafsson <gustafsson.g@gmail.com>.

# Description: This script makes it easy to extract files from all of the most
# common compressed file types.

# Usage: unp <file(s)>

if [[ ! $# -gt 0 ]]; then
  echo "Usage: $0:t [FILENAME(S)]..."
  exit
fi

echo "Extracting archive(s)."

for file in $*; do
  echo

  if [[ ! -f $file ]]; then
    echo "File '$file' does not exist!"
    continue
  fi

  echo "Unpacking file '$file'."

  case $file in
    *.tar.bz2) tar xvjf   $file ;; # Must come before bz2.
    *.bz2)     bunzip2    $file ;;
    *.tar.gz)  tar zxvf   $file ;; # Must come before gz.
    *.gz)      gunzip     $file ;;
    *.rar)     unrar x    $file ;;
    *.tar)     tar xvf    $file ;;
    *.tbz2)    tar xvjf   $file ;;
    *.tgz)     tar zxvf   $file ;;
    *.Z)       uncompress $file ;;
    *.zip)     unzip      $file ;;
    *.7z)      7z x       $file ;;
    *)
      echo "File '$file' cannot be extracted with $0:t!"
    ;;
  esac
done
