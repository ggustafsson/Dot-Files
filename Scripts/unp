#!/usr/bin/env zsh

# Written by GÃ¶ran Gustafsson <gustafsson.g@gmail.com>.

# Description: This script makes it easy to extract files from all of the most
# common compressed file types.

# Dependencies: p7zip and unrar

# Usage: unp <file(s)>

if [[ ! $# -gt 0 ]]; then
  echo "Usage: $0:t [FILENAME(S)]..."
  exit
fi

echo "Extracting archive(s)."

for arg; do
  echo

  if [[ ! -f $arg ]]; then
    echo "File '$arg' does not exist!"
    continue
  fi

  echo "Unpacking file '$arg'."

  case $arg in
    *.tar.bz2) tar xvjf   $arg ;; # Must come before bz2.
    *.bz2)     bunzip2    $arg ;;

    *.tar.gz)  tar zxvf   $arg ;; # Must come before gz.
    *.gz)      gunzip     $arg ;;

    *.rar)     unrar x    $arg ;;
    *.tar)     tar xvf    $arg ;;
    *.tbz2)    tar xvjf   $arg ;;
    *.tgz)     tar zxvf   $arg ;;
    *.Z)       uncompress $arg ;;
    *.zip)     unzip      $arg ;;
    *.7z)      7z x       $arg ;;

    *)
      echo "File '$arg' cannot be extracted with ${0:t}!"
    ;;
  esac
done
