#!/usr/bin/env zsh

# Original script created by Vigneshwaran Raveendran:
#   <https://github.com/vigneshwaranr/bd/blob/master/bd>.
# Modified by GÃ¶ran Gustafsson <gustafsson.g@gmail.com>.

# Description: This script works just like "cd .." if no argument is supplied
# but if an argument is used then $PWD is searched through for a match. If one
# is found then the current directory is changed to the matching directory.
#
# For example if the current directory is "/Users/GLEG/Development/Ruby" and
# the argument "GL" is used then the working directory would be changed to
# "/Users/GLEG" instead. No more "cd ../../.." :)
#
# This script is best used from an alias. I have this in ~/.zshrc:
#
# alias ..=". dotdot"
#
# The dot before the script name must be there otherwise the current directory
# will not change in the current shell.

# Usage: ..
#        .. <pattern>

if [[ $# -eq 1 ]]; then
  newpwd=$(echo $PWD | sed 's|\(.*/'$1'[^/]*/\).*|\1|')

  if [[ $PWD != $newpwd ]]; then
    cd "$newpwd"
  else
    echo "No result found!"
  fi
elif [[ $# -eq 0 ]]; then
  cd ..
else
  echo "Too many arguments!"
fi
