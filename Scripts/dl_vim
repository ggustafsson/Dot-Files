#!/usr/bin/env zsh

# Written by GÃ¶ran Gustafsson <gustafsson.g@gmail.com>.

# Description: This script downloads and updates Vim plugins.

# Usage: dl_vim
#        dl_vim install

if [[ $1 == install ]]; then
  directory=~/.vim/bundle

  echo "Downloading Vim plugins!\n"

  git clone https://github.com/scrooloose/nerdcommenter.git ${directory}/nerdcommenter
  git clone https://github.com/scrooloose/nerdtree.git ${directory}/nerdtree
  git clone https://github.com/scrooloose/syntastic.git ${directory}/syntastic
  git clone https://github.com/sjbach/lusty.git ${directory}/lusty
  git clone https://github.com/sjl/gundo.vim.git ${directory}/gundo.vim
  git clone https://github.com/tpope/vim-endwise.git ${directory}/vim-endwise
  git clone https://github.com/tpope/vim-pathogen.git ~/.vim/pathogen
  git clone https://github.com/tpope/vim-speeddating.git ${directory}/vim-speeddating
  git clone https://github.com/tpope/vim-surround.git ${directory}/vim-surround
else
  plugins=(~/.vim/pathogen(N) ~/.vim/bundle/*(N))

  if [[ -z $plugins ]]; then
    echo "No Vim plugins found! Exiting..."
    exit 1
  fi

  echo "Updating all Vim plugins!"

  for plugin in $plugins; do
    if [[ -d $plugin ]]; then
      print -P "\n%B%F{cyan}Running git pull on: ${plugin:t}%f%b"
      cd $plugin
      git pull
    fi
  done
fi
