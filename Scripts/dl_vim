#!/usr/bin/env zsh

# Description: This script downloads and updates Vim plugins.
#
# Usage: dl_vim
#        dl_vim install
#
# Written by GÃ¶ran Gustafsson (gustafsson.g at gmail.com).
# License: BSD 3-Clause.

if [[ $1 == install ]]; then
  echo "Downloading Vim plugins!\n"

  mkdir -p ~/.vim/bundle
  cd ~/.vim/bundle

  git clone https://github.com/fatih/vim-go.git
  git clone https://github.com/scrooloose/nerdcommenter.git
  git clone https://github.com/scrooloose/nerdtree.git
  git clone https://github.com/scrooloose/syntastic.git
  git clone https://github.com/sjl/gundo.vim.git
  git clone https://github.com/tpope/vim-endwise.git
  git clone https://github.com/tpope/vim-pathogen.git ~/.vim/vim-pathogen
  git clone https://github.com/tpope/vim-repeat.git
  git clone https://github.com/tpope/vim-speeddating.git
  git clone https://github.com/tpope/vim-surround.git

  mkdir -p ~/.vim/autoload
  ln -s ~/.vim/vim-pathogen/autoload/pathogen.vim ~/.vim/autoload/
else
  plugins=(~/.vim/vim-pathogen(N) ~/.vim/bundle/*(N))

  if [[ -z $plugins ]]; then
    echo "No Vim plugins found! Exiting..."
    exit 1
  fi

  echo "Updating all Vim plugins!"

  for plugin in $plugins; do
    if [[ -d $plugin ]]; then
      print -P "\n%B%F{cyan}Running git pull on: ${plugin:t}%f%b"
      cd $plugin
      git pull
    fi
  done
fi
