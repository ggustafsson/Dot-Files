#!/usr/bin/env zsh

# Description: This script prints out the content of my $todo_file file or adds
# a new entry to the bottom of the file. The variable todo_file is set from
# ~/.zshrc with "export todo_file=path".
#
# Usage: t
#        t <text>
#
# Written by GÃ¶ran Gustafsson (gustafsson.g at gmail.com).
# License: BSD 3-Clause.

if [[ -z $todo_file ]]; then
  echo "Variable 'todo_file' is not set! Exiting..."
  exit 1
fi

if [[ $# -ge 1 ]]; then
  echo "Adding new entry to to-do list."
  cp $todo_file $todo_file.tmp
  echo $* > $todo_file
  cat $todo_file.tmp >> $todo_file
  rm $todo_file.tmp
else
  if [[ ! -f $todo_file ]]; then
    echo "File '${todo_file}' does not exist! Exiting..."
    exit 1
  fi

  cat $todo_file
fi
